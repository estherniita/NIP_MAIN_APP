<div class="no-gutter">
    <div class="home-intro">
        <img src="assets/images/cubes-2492010_1920.jpg" alt=""> 
        <div class="appOverlay"></div> 
    </div>
  </div>
  <div class="heading-container" style="margin-bottom: -5rem;margin-top: 3rem;">
    <h1 class="h-m h-fw-1 news__heading">Create/Update Admin User</h1>
    
    <span class="partition"></span><p style="z-index: 1 !important;">Use this form to create/update user</p>
  </div>
<div class="container-fluid bg-lightest">

<div class="row">

    <div class="col col-12 col-lg-7 col-xl-8 justify-content-center text-center form">
        <div class="mt-4">
              
            <form [formGroup]="adminForm" (ngSubmit)="register()" class="text-left mt-4 offset-override">

                
                <!-- <app-error-message [obs]="errorMessage"></app-error-message> -->

                <div class="row">
                    <div class="col-12 col-sm-6 col-md-6">

                    <!--First Name-->
                    <div class="form-group mb-3">
                        <label for="firstname" class="text-secondary">First Name <span class="text-danger">*</span></label>
                        <input type="text" required class="form-control primary-border" id="firstname" name="firstname"
                        formControlName="firstname" maxlength="30"
                        [ngClass]="{ 'is-invalid': submitted && f?.firstname?.errors, 'danger-border': submitted && f?.firstname?.errors }">

                        <div *ngIf="submitted && f?.firstname?.errors" class="invalid-feedback">
                            <div *ngIf="f?.firstname?.errors?.required">First name is required.</div>
                            <div *ngIf="f?.firstname?.errors?.pattern">Enter a valid first name.</div>
                        </div>
                        </div>
                    </div>

                    <div class="col-12 col-sm-6 col-md-6">
                        <div class="form-group mb-3">
                            <label for="lastname" class="text-secondary">Last Name <span class="text-danger">*</span></label>
                            <input type="text" required class="form-control primary-border" id="lastname" name="lastname"
                        formControlName="lastname" maxlength="30"
                        [ngClass]="{ 'is-invalid': submitted && f?.lastname?.errors, 'danger-border': submitted && f?.lastname?.errors }">
                            <div *ngIf="submitted && f?.lastname?.errors" class="invalid-feedback">
                                <div *ngIf="f?.lastname?.errors?.required">Last name is required.</div>
                                <div *ngIf="f?.lastname?.errors?.pattern">Enter a valid last name.</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group mb-3">
                    <label for="email" class="text-secondary">Email Address<span class="text-danger">*</span></label>
                    <input type="text" name="email" required formControlName="email" class="form-control primary-border"
                        [ngClass]="{ 'is-invalid': submitted && f?.email?.errors, 'danger-border': submitted && f?.email?.errors }">
      
                    <div *ngIf="submitted && f?.email?.errors" class="invalid-feedback">
                        <div *ngIf="f?.email?.errors?.required">Email is required.</div>
                        <div *ngIf="f?.email?.errors?.pattern">Enter a valid email address.</div>
                    </div>
                </div>
                <div class="form-group mb-3">
                    <label for="institution_company" class="text-secondary">Institution Name <span class="text-danger">*</span></label>
                    <select type="text" name="institution_company" required formControlName="institution_company" class="form-control primary-border"
                        [ngClass]="{ 'is-invalid': submitted && f?.institution_company?.errors, 'danger-border': submitted && f?.institution_company?.errors }" (change)="setRoles()">
                        <option>MTC super user</option>  
                        <option>Company</option>       
                        <option>International University of Management (IUM)</option>
                        <option>Namibia University of Science and Technology (NUST)</option>
                        <option>Namibia Institute of Mining and Technology (NIMT)</option>
                        <option>University of Namibia (UNAM)</option>
                        <option>Vocational Training Centres (VTC) through the Namibia Training Authority (NTA)</option>
                    </select>
                    <div *ngIf="submitted && f?.institution_company?.errors" class="invalid-feedback">
                        <div *ngIf="f?.institution_company?.errors?.required">Instituion name is required.</div>
                        <div *ngIf="f?.institution_company?.errors?.pattern">Select a valid name.</div>
                    </div>
                </div>

              <div class="form-group mb-3">
                <label for="role" class="text-secondary">Role <span class="text-danger">*</span></label>
                <input type="text" name="role" required formControlName="role" class="form-control primary-border"
                    [ngClass]="{ 'is-invalid': submitted && f?.role?.errors, 'danger-border': submitted && f?.role?.errors }" readonly>

                <div *ngIf="submitted && f?.role?.errors" class="invalid-feedback">
                    <div *ngIf="f?.role?.errors?.required">Role is required.</div>
                    <div *ngIf="f?.role?.errors?.pattern">Enter a valid role.</div>
                </div>
            </div>
            
            
          <div class="form-group mb-3">
            <label for="username" class="text-secondary">Username <span class="text-danger">*</span></label>
            <input type="text" name="username" required formControlName="username" class="form-control primary-border"
                [ngClass]="{ 'is-invalid': submitted && f?.username?.errors, 'danger-border': submitted && f?.username?.errors }">

            <div *ngIf="submitted && f?.username?.errors" class="invalid-feedback">
                <div *ngIf="f?.username?.errors?.required">Username is required.</div>
                <div *ngIf="f?.username?.errors?.minlength">Enter a  valid username.</div>
            </div>
        </div>

     
           
          <div *ngIf="data.addAdmin">

            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" formControlName="password" class="form-control" [ngClass]="{ 'is-invalid': submitted && f?.password?.errors }" required/>
                <div *ngIf="submitted && f?.password?.errors" class="invalid-feedback">
                    <div *ngIf="f?.password?.errors?.required">Password is required</div>
                    <div *ngIf="f?.password?.errors?.minlength">Password must be at least 6 characters</div>
                </div>
            </div>

            <div id="form-login-password" class="form-group">
                <label for="password" class="float-label">Confirm Password
                </label>
                <input *ngIf="data" id="confirmpasswd" formControlName="confirmPassword" [ngClass]="{
                'is-invalid': submitted && f?.confirmPassword?.errors
              }" class="form-control" type="password" size="18" alt="password" required />
                <input *ngIf="!data" id="confirmpasswd" formControlName="confirmPassword" [ngClass]="{
                    'is-invalid': submitted && f?.confirmPassword?.errors
                  }" class="form-control" name="password" type="password" size="18" alt="password" required />
                <span class="form-highlight"></span>
                <span class="form-bar"></span>
                <div *ngIf="submitted && f?.confirmPassword?.errors" class="invalid-feedback">
                  <div *ngIf="f?.confirmPassword?.errors?.required">
                    <strong> Please confirm your password </strong>
                  </div>
                  <div *ngIf="f?.confirmPassword?.errors?.mustMatch">
                    <strong> Password mismatch </strong>
                  </div>
                </div>
              </div>

            </div>
  

            <div *ngIf="data.updateAdmin">
              <a id="submit_btn" class="btn btn-block" style="text-align: center; background:#007ac0; color:white" (click)="changePwdToggle()"
                alt="sign in">
                {{inner_value}}
              </a>
    
              <section *ngIf="changepwd">
                <div class="form-group">
                  <label for="password">Password</label>
                  <input type="password" formControlName="password" class="form-control" [ngClass]="{ 'is-invalid': submitted && f?.password?.errors }" required/>
                  <div *ngIf="submitted && f?.password?.errors" class="invalid-feedback">
                      <div *ngIf="f?.password?.errors?.required">Password is required</div>
                      <div *ngIf="f?.password?.errors?.minlength">Password must be at least 6 characters</div>
                  </div>
              </div>
  
              <div id="form-login-password" class="form-group">
                  <label for="password" class="float-label">Confirm Password
                  </label>
                  <input *ngIf="data" id="confirmpasswd" formControlName="confirmPassword" [ngClass]="{
                  'is-invalid': submitted && f?.confirmPassword?.errors
                }" class="form-control" type="password" size="18" alt="password" required />
                  <input *ngIf="!data" id="confirmpasswd" formControlName="confirmPassword" [ngClass]="{
                      'is-invalid': submitted && f?.confirmPassword?.errors
                    }" class="form-control" name="password" type="password" size="18" alt="password" required />
                  <span class="form-highlight"></span>
                  <span class="form-bar"></span>
                  <div *ngIf="submitted && f?.confirmPassword?.errors" class="invalid-feedback">
                    <div *ngIf="f?.confirmPassword?.errors?.required">
                      <strong> Please confirm your password </strong>
                    </div>
                    <div *ngIf="f?.confirmPassword?.errors?.mustMatch">
                      <strong> Password mismatch </strong>
                    </div>
                  </div>
                </div>
              </section>
            </div>
            <div class="row">
                <div class="col-12 col-sm-12">

                  
                <div class="col-12">
                  <div class="row aqua-gradient">
                    <div class="col-12">
                      <div *ngIf="showtoast">
                        <p id="toast">User successfully registered</p>
                      </div>
                      <div *ngIf="showtoast2">
                        <p id="toast">Information was successfully updated</p>
                      </div>
                    </div>
                  </div>
                </div>
          
                <div class="form-group mb-3">
                    <button [disabled]="loading || btnWait" class="btn btn-login btn-primary btn-block mt-4 py-3" ><span *ngIf="!loading" style="font-size: 2rem;">{{admintext}}</span>
                    <div *ngIf="loading" class="spinner-border text-white" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    </button>
                </div>

                <div class="form-group mb-3">
                    <a routerLink="/user-management" class="btn btn-danger btn-block mt-4 py-3" style="color:white;">Cancel</a>
                </div>
                </div>
                </div>

            </form>
        </div>
    </div>

    <!--IMAGE-->
    <div class="col col-0 col-lg-5 col-xl-4 col-override p-0" style="min-height: 100vh;">
        <div class="landing-pic d-none d-lg-block d-xl-block"></div>
    </div>
</div>
</div>
